<%@ Page Title="Equipment" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="false" CodeBehind="Equipment.aspx.cs" Inherits="Makerspace.Equipment" %>
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
    <div class="jumbotron">
       <h1>Makerspace Equipment</h1>
    </div>

    <asp:UpdatePanel runat="server">
        <ContentTemplate>
            <asp:Panel runat="server" HorizontalAlign="Center">
                <asp:ListView ID="categoryList" runat="server" DataSourceID="MakerspaceDB" >
                    <ItemTemplate>
                        <b style="font-size: large; font-style: normal">
                            <asp:Button  ID="cat_btn" runat="server" Text='<%# Eval("catName")%>'>   
                            </asp:Button> 
                        </b>
                    </ItemTemplate>
                    <ItemSeparatorTemplate>  |  </ItemSeparatorTemplate>
                </asp:ListView>
                <asp:SqlDataSource ID="MakerspaceDB" runat="server" ConnectionString="<%$ ConnectionStrings:MakerspaceDBConnectionString %>" SelectCommand="SELECT [catName] FROM [EquipmentCategory]"></asp:SqlDataSource>
            </asp:Panel>
            

          

            <asp:Panel runat="server" 
                ID="Criteria" 
                HorizontalAlign="Center">
                <asp:RadioButton ID="NameBtn" runat="server" GroupName="EquipmentSearch" Text="By Name" Checked="true"/>
                <asp:RadioButton ID="FunctionBtn" runat="server" GroupName="EquipmentSearch" Text="By Function" />
                <asp:RadioButton ID="LocBtn" runat="server" GroupName="EquipmentSearch" Text="By Location Name" />
                <asp:RadioButton ID="LocCodeBtn" runat="server" GroupName="EquipmentSearch" Text="By Location Code" />
            </asp:Panel>
            <asp:Panel runat="server" HorizontalAlign="Center">
                <asp:TextBox ID="SearchIn" runat="server" Width="526px"></asp:TextBox>
                <asp:Button ID="SearchBtn" Text="Search" runat="server" OnClick="SearchBtn_Click"/>
            
            </asp:Panel>

        
            <div id="admin">
            <a class="btn btn-primary btn-lg" runat="server" href="~/AddEquipment" style="text-align:center">New</a>
            </div>
            <asp:Label runat="server" ID="ErrorLbl"></asp:Label>
            
            <asp:Label runat="server">Total: </asp:Label>
            <asp:Label runat="server" ID="EquipGVCount"></asp:Label>
          
            <asp:GridView 
                ID="EquipGV" 
                runat="server" 
                AutoGenerateColumns="false"
                AutoGenerateSelectButton="true"
                AutoGenerateEditButton="false"
                AutoGenerateDeleteButton="false"
                OnSelectedIndexChanged="EquipGV_SelectedIndexChanged" 
                AllowPaging="false">
                <Columns>
                    <asp:BoundField DataField="eID" HeaderText="ID"/>
                    <asp:BoundField DataField="eCode" HeaderText="Code"/>
                    <asp:BoundField DataField="eName" HeaderText="Name"/>
                    <asp:BoundField DataField="ItemCode" HeaderText="Sub Items"/>
                    <asp:BoundField DataField="LocationID" HeaderText="Location"/>
                    <asp:BoundField DataField="eFunction" HeaderText="Function" />
                    <asp:BoundField DataField="eTraining" HeaderText="Training Requirements"/>
               
                </Columns>
            </asp:GridView>

               
            <asp:FormView 
                ID="EquipFormView" 
                DataKeyNames="eID"
                runat="server"

                OnModeChanging="EquipFormView_ModeChanging"
                OnItemUpdating="EquipFormView_ItemUpdating"
   
                >
                <ItemTemplate>
                    <h3><%# Eval("eName") %></h3>
                    <asp:Label runat="server" ID="eID" ></asp:Label>
                    <table>
                        <tr>
                            <td>ID</td>
                            <td><%#Eval("eID") %></td>
                        </tr>
                        <tr>
                            <td>Code</td>
                            <td><%#Eval("eCode") %></td>
                        </tr>
                        <tr>
                            <td>Name</td>
                            <td><%#Eval("eName") %></td>
                        </tr>
                        <tr>
                            <td>Description</td>
                            <td><%#Eval("eDesc") %></td>
                        </tr>
                        <tr>
                            <td>Function</td>
                            <td><%#Eval("eFunction") %></td>
                        </tr>
                        <tr>
                            <td>Manual</td>
                            <td><%#Eval("eManual") %></td>
                        </tr>
                        <tr>
                            <td>Safety Caution</td>
                            <td><%#Eval("eSafety") %></td>
                        </tr>
                        <tr>
                            <td>Training Requirement</td>
                            <td><asp:Label runat="server" 
                                Text='<%# Convert.ToInt32(Eval("eTraining")).Equals(1) ? "Yes": "No"%>'>
                                </asp:Label></td>
                  
                        </tr>
                        <tr>
                            <td><asp:LinkButton ID="Add" runat="server" Text="New" CommandName="Add"/></td>
                            <td><asp:LinkButton ID="EditBtn" runat="server" Text="Edit" CommandName="Edit"/></td>
                            <td><asp:LinkButton ID="Delete" runat="server" Text="Delete" CommandName="Delete" /></td>
                    
                        </tr>
                    </table>
                </ItemTemplate> 
                <EditItemTemplate>
                    <h3><%# Eval("eName") %></h3>
                    <asp:Label runat="server" ID="eIDD" ></asp:Label>
                    <table>
                        <tr>
                            <td>ID</td>
                            <td><asp:Label ID="eIDLabel" runat="server" Text='<%#Bind("eID")%>'></asp:Label> </td>
                        </tr>
                        <tr>
                            <td>Code</td> 
                            <td><asp:TextBox ID="eCodeUpdateTextBox" runat="server" Text='<%#Bind("eCode") %>'></asp:TextBox> </td>
                        </tr>
                        <tr>
                            <td>Name</td>
                            <td><asp:TextBox ID="eNameUpdateTextBox" runat="server" Text='<%#Bind("eName") %>'></asp:TextBox></td>
                        </tr>
                        <tr>
                            <td>Description</td>
                            <td><asp:TextBox ID="eDescUpdateTextBox" runat="server" Text='<%#Bind("eDesc") %>'></asp:TextBox> </td>
                        </tr>
                        <tr>
                            <td>Function</td>
                            <td><asp:TextBox ID="eFunctionUpdateTextBox" runat="server" Text='<%#Bind("eFunction") %>'></asp:TextBox> </td>
                        </tr>
                        <tr>
                            <td>Manual</td>
                            <td><asp:TextBox ID="eManualUpdateTextBox" runat="server" Text='<%#Bind("eManual") %>'></asp:TextBox></td>
                        </tr>
                        <tr>
                            <td>Safety Caution</td>
                            <td><asp:TextBox ID="eSafetyUpdateTextBox" runat="server" Text='<%#Bind("eSafety") %>'></asp:TextBox></td>
                        </tr>
                        <tr>
                            <td>Training Requirement</td>
                            <td><asp:DropDownList 
                                ID="eTrainingUpdateDdl"
                                runat="server"
                                AutoPostBack="true">
                                    <asp:ListItem 

                                        Value="1"
                                        Text="Yes">

                                    </asp:ListItem>
                                    <asp:ListItem  Value="0" Text="No"></asp:ListItem>
                                </asp:DropDownList>
                               
                        </tr>
                        <tr>
                            <td><asp:LinkButton ID="UpdateBtn" runat="server" Text="Update" CommandName="Update"  /></td>
                            <td><asp:LinkButton ID="CancelBtn" runat="server" Text="Cancel" CommandName="Cancel" /></td>
                  
                    
                        </tr>
                    </table>

                </EditItemTemplate>
       

            </asp:FormView>
            <asp:GridView 
                runat="server"
                ID="ItemGV"
                AllowPaging="false" 
                AutoGenerateColumns="false"
                DataKeyNames="itemID" 
                AutoGenerateSelectButton="true"
                OnSelectedIndexChanged="ItemGV_SelectedIndexChanged" 
                ShowFooter="true">
                <Columns>
   <%--                 <asp:TemplateField HeaderText="ID">
                        <ItemTemplate >
                            <asp:Label runat="server" ID="itemID" Text='<%# Bind("itemID") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>--%>
                    <asp:BoundField HeaderText="ID" DataField="itemID"/>
                    <asp:TemplateField HeaderText="Code">
                        <ItemTemplate>
                            <asp:Label runat="server" Text="<% %>""></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>

                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField HeaderText="Code" DataField="itemCode"/>
                    <asp:BoundField HeaderText="Status" DataField="itemStatus" />
                    <asp:BoundField HeaderText="Location" DataField="locID"/>
            
                    <asp:TemplateField HeaderText="">
                        <ItemTemplate>
                            <asp:LinkButton ID="EditBtn" runat="server" Text="Edit" 
                                CommandName="Edit" CommandArgument='<%#Bind("itemID") %>' ></asp:LinkButton>
                        </ItemTemplate>
                        <FooterStyle />
                        <FooterTemplate>
                            <asp:LinkButton runat="server" Text="Add"
                                CommandName="Add"></asp:LinkButton>
                        </FooterTemplate>
                    </asp:TemplateField>
                    


                </Columns>
                
               
            </asp:GridView>


            <br />


        </ContentTemplate>
    </asp:UpdatePanel>






    

</asp:Content>
